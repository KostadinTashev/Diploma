{% extends 'base/base.html' %}
{% load static %}

{% block page_content %}
    <div class="trainer-dashboard">
        <h1 class="dashboard-heading">üëã –ó–¥—Ä–∞–≤–µ–π, {{ trainer.user.first_name }}!</h1>
        <p class="dashboard-lead">–î–æ–±—Ä–µ –¥–æ—à—ä–ª –≤ —Ç—Ä–µ–Ω—å–æ—Ä—Å–∫–æ—Ç–æ —Ç–∞–±–ª–æ. –û—Ç—Ç—É–∫ –º–æ–∂–µ—à –¥–∞ —É–ø—Ä–∞–≤–ª—è–≤–∞—à –∫–ª–∏–µ–Ω—Ç–∏, –ø—Ä–æ–≥—Ä–∞–º–∏,
            —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ –∏ –æ—â–µ.</p>


        <div class="card-grid">
            <a href="{% url 'trainer clients' trainer.id %}" class="card-link">
                <div class="icon-box bg-blue">üë•</div>
                <div class="card-title">–ú–æ–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∏</div>
                <p class="card-desc">–ü—Ä–µ–≥–ª–µ–¥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ–∫—É—â–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∏.</p>
                <p class="card-desc fw-bold">–û–±—â –±—Ä–æ–π: {{ client_count }}</p>
            </a>

            <a href="{% url 'workout list' %}" class="card-link">
                <div class="icon-box bg-orange">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
                <div class="card-title">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>
                <p class="card-desc">–°—ä–∑–¥–∞–≤–∞–Ω–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.</p>
            </a>

            <a href="{% url 'exercises' %}" class="card-link">
                <div class="icon-box bg-green">üßò‚Äç‚ôÇÔ∏è</div>
                <div class="card-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</div>
                <p class="card-desc">–ë–∞–∑–∞ —Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏ —Ç—è—Ö–Ω–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.</p>
            </a>

            <a href="{% url 'trainer nutrition clients' %}" class="card-link">
                <div class="icon-box bg-red">üçΩÔ∏è</div>
                <div class="card-title">–•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ</div>
                <p class="card-desc">–ù–∞–∑–Ω–∞—á–∞–≤–∞–Ω–µ –∏ –ø—Ä–µ–≥–ª–µ–¥ –Ω–∞ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ —Ä–µ–∂–∏–º–∏.</p>
            </a>

            {#            <a href="{% url 'plan add' %}" class="card-link">#}
            {#                <div class="icon-box bg-teal">‚ûï</div>#}
            {#                <div class="card-title">–°—ä–∑–¥–∞–π –ø–ª–∞–Ω</div>#}
            {#                <p class="card-desc">–î–æ–±–∞–≤–∏ –Ω–æ–≤ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–Ω –ø–ª–∞–Ω –∫—ä–º –∫–ª–∏–µ–Ω—Ç.</p>#}
            {#            </a>#}

            <a href="{% url 'trainer details' trainer.id trainer.user.username %}" class="card-link">
                <div class="icon-box bg-purple">üßë‚Äçüíº</div>
                <div class="card-title">–ü—Ä–æ—Ñ–∏–ª</div>
                <p class="card-desc">–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π —Ç–≤–æ—è—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è.</p>
            </a>
        </div>
    </div>

    <div class="mt-5">
        <h3 class="text-center fw-bold mb-4">‚≠ê –û—Ç–∑–∏–≤–∏</h3>


        {% if trainer_reviews %}
            {% if average_rating > 0 %}
                <div class="mb-4 text-center">
                    <h4 class="fw-bold text-warning">
                        –°—Ä–µ–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: {{ average_rating }} ‚≠ê
                    </h4>
                    <div class="text-warning fs-4">
                        {% for i in "12345" %}
                            {% if forloop.counter <= average_rating %}
                                <i class="bi bi-star-fill"></i>
                            {% elif average_rating|floatformat:1 >= forloop.counter0|stringformat:"d"|add:"0.5" %}
                                <i class="bi bi-star-half"></i>
                            {% else %}
                                <i class="bi bi-star"></i>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                {% for review in trainer_reviews %}
                    <div class="col">
                        <div class="card shadow-sm h-100 border-0">
                            <div class="card-body">
                                <h5 class="card-title">{{ review.client.user.get_full_name }}</h5>
                                <p class="text-muted small">{{ review.created_at|date:"d.m.Y" }}</p>
                                {% if review.comment %}
                                    <p class="card-text">‚Äú{{ review.comment }}‚Äù</p>
                                {% endif %}
                                <div class="text-warning">
                                    {% for i in "12345" %}
                                        {% if forloop.counter <= review.rating %}
                                            <i class="bi bi-star-fill"></i>
                                        {% else %}
                                            <i class="bi bi-star"></i>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-muted text-center">–í—Å–µ –æ—â–µ –Ω—è–º–∞ –æ—Å—Ç–∞–≤–µ–Ω–∏ –æ—Ç–∑–∏–≤–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∏.</p>
        {% endif %}
    </div>
    <style>
        .trainer-dashboard {
            max-width: 1200px;
            margin: auto;
            padding: 60px 20px;
            text-align: center;
            background-color: #ffffff;
        }

        .dashboard-heading {
            font-size: 36px;
            font-weight: bold;
            color: #222;
            margin-bottom: 10px;
        }

        .dashboard-lead {
            font-size: 18px;
            color: #666;
            margin-bottom: 40px;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }

        .card-link {
            background: #f5f5f5;
            border-radius: 14px;
            padding: 30px 20px;
            text-decoration: none;
            color: #222;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.06);
        }

        .card-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
        }

        .icon-box {
            font-size: 36px;
            width: 70px;
            height: 70px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .card-desc {
            font-size: 14px;
            color: #555;
        }

        .bg-blue {
            background-color: #007bff;
        }

        .bg-orange {
            background-color: #fd7e14;
        }

        .bg-green {
            background-color: #28a745;
        }

        .bg-red {
            background-color: #dc3545;
        }

        .bg-purple {
            background-color: #6f42c1;
        }

        .bg-teal {
            background-color: #20c997;
        }
    </style>
{% endblock %}
